"use strict";(self.webpackChunksparkpro_ui=self.webpackChunksparkpro_ui||[]).push([[752],{2752:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var o=n(5043),i=n(3969),r=n(9379),s=n(45),a=n(8387),l=n(8692),d=n(3115),c=n(1807),p=n(8128),u=n(267),h=n(1612),x=n(9192),m=n(5579),y=n(6906),f=n(8348),g=n(9857),w=n(6061);function A(e){return(0,w.Ay)("MuiCollapse",e)}(0,g.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var v=n(579);const E=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],b=["ownerState"],j=(0,p.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((0,h.A)(e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}})),C=(0,p.Ay)("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),S=(0,p.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),R=o.forwardRef(function(e,t){const n=(0,x.b)({props:e,name:"MuiCollapse"}),{addEndListener:i,children:p,className:h,collapsedSize:g="0px",component:w,easing:R,in:k,onEnter:z,onEntered:D,onEntering:U,onExit:F,onExited:I,onExiting:P,orientation:L="vertical",style:M,timeout:N=m.p0.standard,TransitionComponent:T=l.Ay}=n,H=(0,s.A)(n,E),W=(0,r.A)((0,r.A)({},n),{},{orientation:L,collapsedSize:g}),O=(e=>{const{orientation:t,classes:n}=e,o={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,c.A)(o,A,n)})(W),_=(0,u.A)(),q=(0,d.A)(),B=o.useRef(null),G=o.useRef(),J="number"===typeof g?"".concat(g,"px"):g,K="horizontal"===L,Q=K?"width":"height",V=o.useRef(null),X=(0,f.A)(t,V),Y=e=>t=>{if(e){const n=V.current;void 0===t?e(n):e(n,t)}},Z=()=>B.current?B.current[K?"clientWidth":"clientHeight"]:0,$=Y((e,t)=>{B.current&&K&&(B.current.style.position="absolute"),e.style[Q]=J,z&&z(e,t)}),ee=Y((e,t)=>{const n=Z();B.current&&K&&(B.current.style.position="");const{duration:o,easing:i}=(0,y.c)({style:M,timeout:N,easing:R},{mode:"enter"});if("auto"===N){const t=_.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),G.current=t}else e.style.transitionDuration="string"===typeof o?o:"".concat(o,"ms");e.style[Q]="".concat(n,"px"),e.style.transitionTimingFunction=i,U&&U(e,t)}),te=Y((e,t)=>{e.style[Q]="auto",D&&D(e,t)}),ne=Y(e=>{e.style[Q]="".concat(Z(),"px"),F&&F(e)}),oe=Y(I),ie=Y(e=>{const t=Z(),{duration:n,easing:o}=(0,y.c)({style:M,timeout:N,easing:R},{mode:"exit"});if("auto"===N){const n=_.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),G.current=n}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[Q]=J,e.style.transitionTimingFunction=o,P&&P(e)});return(0,v.jsx)(T,(0,r.A)((0,r.A)({in:k,onEnter:$,onEntered:te,onEntering:ee,onExit:ne,onExited:oe,onExiting:ie,addEndListener:e=>{"auto"===N&&q.start(G.current||0,e),i&&i(V.current,e)},nodeRef:V,timeout:"auto"===N?null:N},H),{},{children:(e,t)=>{let{ownerState:n}=t,o=(0,s.A)(t,b);return(0,v.jsx)(j,(0,r.A)((0,r.A)({as:w,className:(0,a.A)(O.root,h,{entered:O.entered,exited:!k&&"0px"===J&&O.hidden}[e]),style:(0,r.A)({[K?"minWidth":"minHeight"]:J},M),ref:X,ownerState:(0,r.A)((0,r.A)({},W),{},{state:e})},o),{},{children:(0,v.jsx)(C,{ownerState:(0,r.A)((0,r.A)({},W),{},{state:e}),className:O.wrapper,ref:B,children:(0,v.jsx)(S,{ownerState:(0,r.A)((0,r.A)({},W),{},{state:e}),className:O.wrapperInner,children:p})})}))}}))});R&&(R.muiSupportAuto=!0);const k=R;var z=n(7873),D=n(5895),U=n(298),F=n(2097),I=n(7405);const P=e=>{let{employeeId:t,existingPhotoFilename:n,preview:r,file:s,onFileSelect:a,onUploadSuccess:l,onUploadFail:d,onClear:c,apiEndpoint:p,setCheckUpload:u,show:h=!0}=e;const x=(0,I.d)(),[m,y]=(0,o.useState)(r||null);if((0,o.useEffect)(()=>{if(s){const e=URL.createObjectURL(s);return y(e),()=>URL.revokeObjectURL(e)}y(r||(n?"".concat(p(t),"/").concat(n):null))},[s,n,r,t,p]),!h)return null;return(0,v.jsx)(i.A,{sx:{flex:{xs:1,md:"0 0 30%"},width:{xs:"100%",md:"30%"},justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:(0,v.jsx)(k,{in:h,children:(0,v.jsxs)(i.A,{sx:{border:"1px dashed grey",borderRadius:2,p:3,textAlign:"center",justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,v.jsx)(z.A,{src:m||"",alt:"passport",sx:{width:199,height:246,mb:2,bgcolor:m?"transparent":"grey.100",cursor:"pointer",border:m?"1px solid #ddd":"none",boxShadow:m?2:0},variant:"rounded"}),(0,v.jsx)(D.A,{variant:"caption",sx:{mt:2,color:"text.secondary",textAlign:"center"},children:m?"Preview of selected photo":"No photo selected yet"}),(0,v.jsxs)(U.A,{direction:"row",spacing:2,sx:{mt:3},children:[(0,v.jsxs)(F.A,{variant:"outlined",component:"label",children:[m?"Change Photo":"Choose File",(0,v.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&a(n)}})]}),m&&(0,v.jsx)(F.A,{variant:"outlined",color:"error",onClick:()=>{y(null),null===c||void 0===c||c(),x.info("Photo preview removed")},sx:{borderRadius:2},children:"Remove"})]}),(0,v.jsx)(F.A,{variant:"contained",color:"primary",sx:{mt:3,borderRadius:2},disabled:!s,onClick:async()=>{if(s)try{const e=new FormData;e.append("file",s);const n=await fetch(p(t),{method:"POST",body:e});if(!n.ok)throw new Error("File upload failed");const o=await n.json();null===l||void 0===l||l(o.filename),u(!0),x.success("Photo uploaded successfully!")}catch(e){const t=e instanceof Error?e.message:"Upload failed. Please try again.";null===d||void 0===d||d(t),x.error(t)}finally{null===c||void 0===c||c()}else x.info("Please select a picture")},children:"Upload"})]})})})}}}]);
//# sourceMappingURL=752.25cdc1c5.chunk.js.map